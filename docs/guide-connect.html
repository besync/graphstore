<html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Connecting a database · GraphStore</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="Connecting a database · GraphStore"/><meta property="og:type" content="website"/><meta property="og:url" content="https://besync.github.io/index.html"/><meta property="og:description" content="## Load model and connect to Database"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/graphstore-wt.svg"/><h2 class="headerTitle">GraphStore</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li><a href="/docs/introduction.html" target="_self">Docs</a></li><li><a href="/docs/api-readme.html" target="_self">API</a></li><li><a href="/en/help.html" target="_self">Help</a></li><li><a href="https://github.com/besync/graphstore" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Guides</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>The Basics</h3><ul><li class="navListItem"><a class="navItem" href="/docs/introduction.html">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/documents-collections.html">Documents and Collections</a></li><li class="navListItem"><a class="navItem" href="/docs/stores-models.html">Models and Stores</a></li><li class="navListItem"><a class="navItem" href="/docs/schema.html">Schemas</a></li></ul></div><div class="navGroup navGroupActive"><h3>Guides</h3><ul><li class="navListItem"><a class="navItem" href="/docs/guide.html">Installation</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/docs/guide-connect.html">Connecting a database</a></li><li class="navListItem"><a class="navItem" href="/docs/guide-get.html">Fetching data</a></li><li class="navListItem"><a class="navItem" href="/docs/guide-observe.html">Observing changes in the UI</a></li><li class="navListItem"><a class="navItem" href="/docs/guide-update.html">Update / Delete / Create Actions</a></li></ul></div><div class="navGroup navGroupActive"><h3>Code Generators</h3><ul><li class="navListItem"><a class="navItem" href="/docs/schema-generator.html">Generating the Schema</a></li><li class="navListItem"><a class="navItem" href="/docs/model-generator.html">Generating the Model</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1>Connecting a database</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" name="load-model-and-connect-to-database"></a><a href="#load-model-and-connect-to-database" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Load model and connect to Database</h2>
<p>In the application entry point (e.g, <code>app.js</code>) connect the GraphStore to the appropriate backend.  For example, below we attach to an in memory store based on a large mock JSON object.   A Firebase example is in the <code>__tests__</code> folder (<code>PersistentModel_tests</code>).</p>
<pre><code class="hljs css js"><span class="hljs-keyword">import</span> { observer, autorun } <span class="hljs-keyword">from</span> <span class="hljs-string">'mobx'</span>;
<span class="hljs-keyword">import</span> { Model, stores, GraphStoreMemory } <span class="hljs-keyword">from</span> <span class="hljs-string">'@besync/graphstore'</span>;
<span class="hljs-keyword">import</span> { mockData } <span class="hljs-keyword">from</span> <span class="hljs-string">'@besync/graphstore-test-mockdata'</span>;

MobxUseStrict(<span class="hljs-literal">true</span>);

Model.setDefaultStore(<span class="hljs-keyword">new</span> GraphStoreMemory(mockData()));

</code></pre>
<h2><a class="anchor" aria-hidden="true" name="example-input-schema"></a><a href="#example-input-schema" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example input schema</h2>
<p>We include some utility code generators (see packages/graphstore-dev) to generate a GraphQl schema from backend databases such as Firebase.   These schema are in turn converted into TypeScript code automatically, and used by the library.   An example of the input schema is as follows (typically code generated for large existing databases, but can be manually post-edited).</p>
<p>Note that we use graphql for the schema with custom decorators simply as a lingua franca; it does not imply that the server or the client libraries use GraphQL (although they certainly can be!)</p>
<pre><code class="hljs css graphql"><span class="hljs-selector-tag">type</span> <span class="hljs-selector-tag">User</span> 
     @<span class="hljs-selector-tag">connector</span>(<span class="hljs-attribute">byId</span>: <span class="hljs-string">"(id) =&gt; getDocument('users/${id}')"</span>)
    {
        <span class="hljs-attribute">id</span>: UserId! <span class="hljs-variable">@primary</span>,
        <span class="hljs-attribute">email</span>: String!,
        <span class="hljs-attribute">profile_picture</span>: String!,
        <span class="hljs-attribute">username</span>: String!
        <span class="hljs-attribute">chats</span>: [Chat] <span class="hljs-variable">@resolver</span>(<span class="hljs-attribute">get</span>: <span class="hljs-string">"ChatsForUser(id)"</span>),
        <span class="hljs-attribute">logs</span>: [Log] <span class="hljs-variable">@resolver</span>(<span class="hljs-attribute">get</span>: <span class="hljs-string">"LogsForUser(id)"</span>),
        <span class="hljs-attribute">userPosts</span>: [UserPost] <span class="hljs-variable">@resolver</span>(<span class="hljs-attribute">get</span>: <span class="hljs-string">"UserPostsForUser(id)"</span>)
    }
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="guide.html">← Installation Guide</a><a class="docs-next button" href="guide-get.html">Fetching data →</a></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/graphstore-wt80.svg" alt="GraphStore" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/en/introduction.html">Getting Started</a><a href="/docs/en/api-readme.html">API Reference</a></div><div><h5>Community</h5><a href="/en/users.html">User Showcase</a><a href="https://stackoverflow.com/search?q=@besync/graphstore" target="_blank">Stack Overflow</a></div><div><h5>More</h5><a href="https://github.com/besync/graphstore">GitHub</a><a class="github-button" href="https://github.com/besync/graphstore" data-icon="octicon-star" data-count-href="/besync/graphstore/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="https://github.com/besync" target="_blank" class="fbOpenSource"><img src="/img/oss_logo.png" alt="Sync Health Labs Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2018 Sync Health Labs</section></footer></div></body></html>